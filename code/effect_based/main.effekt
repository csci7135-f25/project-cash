effect yield(n: Int): Bool

def example() = {
  var produce = true;
  var n = 0;
  while (produce) {
    produce = do yield(n)
    n = n + 1
  }
  println("done")
}

def main() = {
  try { example() } with yield { n =>
    println(n); resume(n < 3)
  }
}
